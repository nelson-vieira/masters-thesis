% SPDX-License-Identifier: CC-BY-4.0
%
% Copyright (c) 2023 Nelson Vieira
%
% @author Nelson Vieira <2080511@student.uma.pt>
% @license CC-BY-4.0 <https://creativecommons.org/licenses/by/4.0/legalcode.txt>
\setcounter{secnumdepth}{5}
\setcounter{tocdepth}{5}

\usepackage[dvipsnames]{xcolor}
\usepackage[document]{ragged2e}
\usepackage[nottoc]{tocbibind}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage[portuguese, english]{babel}
\usepackage[shortlabels]{enumitem}
% \usepackage{a4wide}
\usepackage[hidelinks]{hyperref}
\usepackage{nomencl}
\usepackage{float}
\usepackage{graphicx}
\usepackage{array}
\usepackage{tablefootnote} % table footnotes
\usepackage{url}
% \usepackage[hyphenbreaks]{breakurl} % disabled to fix warning
% \usepackage{lineno}
\usepackage{setspace}
\usepackage[version=4]{mhchem}
\usepackage[flushleft]{threeparttable}
\usepackage{multirow}
\usepackage{import}
\usepackage{eurosym}
\usepackage{parskip}
\usepackage{cite}
\usepackage{pgfgantt}
\usepackage{amsmath,amssymb,amsfonts}
\usepackage{textcomp}
\usepackage{tabularx} % in the preamble
\usepackage{algorithm}
\usepackage{algpseudocode}
\usepackage{datatool}
\usepackage{datetime}
\usepackage{subcaption}
\usepackage{pgfplots}
% Fix for pgfplots error: running in backwards compatibility mode
% (unsuitable tick labels; missing features)
\pgfplotsset{compat=1.18}
\usepackage{pgf-pie}
\usepackage{tcolorbox}
\usepackage{hhline,colortbl}
\usepackage{longtable}
\usepackage{pdfpages}
\usepackage{pdflscape}
\usepackage{tikz}
\usepackage{nameref}
\usepackage{cleveref}
\usepackage{xparse}
\usepgfplotslibrary{groupplots}
\usepgfplotslibrary{statistics}
\usepgfplotslibrary{fillbetween}

\usepackage[a4paper, total={15cm, 24cm}]{geometry}

\graphicspath{ {figures/} }
\def\UrlBreaks{\do\/\do-}

\onehalfspacing

% Column types used in 7 point scale tabular
\newcolumntype{P}{>{\centering\arraybackslash}p{0.50cm}}
\newcolumntype{L}{>{\raggedright\arraybackslash}m{0.25\textwidth}}
\newcolumntype{R}{>{\raggedleft\arraybackslash}m{0.25\textwidth}}

% Tabular used as 7 point scale
\newcommand{\usetbl}{%
    \begin{tabular}{@{}|*7{P|}@{}}
        \hline
        1 & 2 & 3 & 4 & 5 & 6 & 7 \\
        \hline
    \end{tabular}
}

% Command used for question, as input (#1), then representing a table as 7 point scale,
% defined in the previous command, displayed as:
%                 _ _ _ _ _ _ _
% Question 1?    |_|_|_|_|_|_|_|
\newcommand\prop[1]{%
    \item
    \parbox[t]{0.5\textwidth}{#1}%
    \qquad
    \parbox[t]{0.5\textwidth}{\usetbl}%
}

%% Fix for the sub sub section
\makeatletter
\renewcommand\subsubsection{\@startsection{subsubsection}{3}{\z@}%
    {-18\p@ \@plus -4\p@ \@minus -4\p@}%
    {4\p@ \@plus 2\p@ \@minus 2\p@}%
    {\normalfont\normalsize\bfseries\boldmath
\rightskip=\z@ \@plus 8em\pretolerance=10000 }}
\renewcommand\paragraph{\@startsection{paragraph}{4}{\z@}%
    {-12\p@ \@plus -4\p@ \@minus -4\p@}%
    {2\p@ \@plus 1\p@ \@minus 1\p@}%
    {\normalfont\normalsize\bfseries\boldmath
\rightskip=\z@ \@plus 8em\pretolerance=10000 }}
\makeatother

\makenomenclature

%% Fix to allow short name on unnumbered sections using nameref package
\makeatletter
\let\latex@@section\section
\RenewDocumentCommand{\section}{som}{%
    \IfBooleanTF{#1}{%
        \IfValueTF{#2}{%
            \addcontentsline{toc}{section}{#3}%
            \latex@@section*{#3}\edef\@currentlabelname{#2}%
        }{%
            \latex@@section*{#3}\edef\@currentlabelname{#3}%
        }%
    }{%
        \IfValueTF{#2}{%
            \latex@@section[#2]{#3}
        }{%
            \latex@@section{#3}
        }%
    }%
}
\makeatother

%% Fix to add more space in ToC on subsubsection and paragraph between name and dotted lines
\makeatletter
% \renewcommand*\l@section{\@dottedtocline{1}{1.5em}{2.3em}}
% \renewcommand*\l@subsection{\@dottedtocline{2}{3.8em}{3.2em}}
\renewcommand*\l@subsubsection{\@dottedtocline{3}{3.4em}{3.0em}}
\renewcommand*\l@paragraph{\@dottedtocline{4}{5.8em}{3.7em}}
% \renewcommand*\l@subparagraph{\@dottedtocline{5}{12em}{6em}}
\makeatother
